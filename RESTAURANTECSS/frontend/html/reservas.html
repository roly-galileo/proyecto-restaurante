<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Reserva tu mesa en Sabor Casero, restaurante tradicional en Sicuani, Cusco.">

    <!-- Fuentes (sistema de dise√±o Sabor Casero) -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons (solo iconos, sin estilos de layout) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

    <!-- CSS principal -->
    <link rel="stylesheet" href="../css/reservas.css">

    <title>Reservar Mesa ‚Äì Sabor Casero</title>
</head>

<body>

    <!-- ===== LOADING OVERLAY ===== -->
    <div class="loading-overlay" id="loadingOverlay" aria-hidden="true">
        <div class="loading-spinner">
            <div class="pulse-dots">
                <span class="pulse-dot"></span>
                <span class="pulse-dot"></span>
                <span class="pulse-dot"></span>
            </div>
            <p class="loading-text">Procesando reserva‚Ä¶</p>
        </div>
    </div>

    <!-- ===== TOAST MENSAJE ===== -->
    <div id="mensaje" class="toast-msg hidden" role="alert" aria-live="polite"></div>

    <!-- ===== HEADER MINI ===== -->
    <header class="res-header">
        <a href="index.html" class="res-logo">
            <span class="logo-icon">üç¥</span>
            <span class="logo-text">Sabor Casero</span>
        </a>
        <p class="res-header-sub">Sicuani ¬∑ Cusco ¬∑ Per√∫</p>
    </header>

    <!-- ===== CONTENIDO PRINCIPAL ===== -->
    <main class="res-main">

        <!-- COLUMNA FORMULARIO -->
        <section class="res-form-col">

            <!-- Tarjeta del formulario -->
            <div class="form-card">

                <!-- Encabezado de la tarjeta -->
                <div class="form-card-header">
                    <i class="bi bi-calendar-check form-card-icon"></i>
                    <div>
                        <h1 class="form-card-title">Reservar Mesa</h1>
                        <p class="form-card-sub">Complete el formulario para asegurar su lugar</p>
                    </div>
                </div>

                <!-- Indicador de progreso -->
                <div class="progress-track" aria-label="Progreso del formulario">
                    <div class="progress-line"></div>
                    <div class="progress-line-fill" id="progressFill"></div>
                    <div class="progress-step active" data-step="1" aria-current="step">
                        <span>1</span>
                        <label>Datos</label>
                    </div>
                    <div class="progress-step" data-step="2">
                        <span>2</span>
                        <label>Fecha</label>
                    </div>
                    <div class="progress-step" data-step="3">
                        <span>3</span>
                        <label>Hora</label>
                    </div>
                    <div class="progress-step" data-step="4">
                        <span>4</span>
                        <label>Personas</label>
                    </div>
                </div>

                <!-- Formulario -->
                <form id="formReserva" novalidate>

                    <!-- Nombre -->
                    <div class="field-group" id="fg-nombre">
                        <label class="field-label" for="nombre">
                            <i class="bi bi-person-fill"></i> Nombre completo
                        </label>
                        <input type="text"
                            id="nombre"
                            name="nombre"
                            class="field-input"
                            placeholder="Ej: Juan P√©rez"
                            autocomplete="name"
                            required>
                        <span class="field-error">
                            <i class="bi bi-exclamation-circle"></i> Ingrese un nombre v√°lido (solo letras)
                        </span>
                    </div>

                    <!-- Tel√©fono -->
                    <div class="field-group" id="fg-telefono">
                        <label class="field-label" for="telefono">
                            <i class="bi bi-telephone-fill"></i> Tel√©fono de contacto
                        </label>
                        <input type="tel"
                            id="telefono"
                            name="telefono"
                            class="field-input"
                            placeholder="999 999 999"
                            maxlength="9"
                            autocomplete="tel"
                            required>
                        <span class="field-error">
                            <i class="bi bi-exclamation-circle"></i> Ingrese 9 d√≠gitos iniciando con 9
                        </span>
                    </div>

                    <!-- Fecha -->
                    <div class="field-group" id="fg-fecha">
                        <label class="field-label" for="fecha">
                            <i class="bi bi-calendar-event"></i> Fecha de reserva
                        </label>
                        <input type="date"
                            id="fecha"
                            name="fecha"
                            class="field-input"
                            required>
                        <span class="field-error">
                            <i class="bi bi-exclamation-circle"></i> Seleccione una fecha v√°lida (no en el pasado)
                        </span>
                    </div>

                    <!-- Hora inicio / fin -->
                    <div class="field-row">
                        <div class="field-group" id="fg-inicio">
                            <label class="field-label" for="inicio">
                                <i class="bi bi-clock"></i> Hora de llegada
                            </label>
                            <input type="time"
                                id="inicio"
                                name="inicio"
                                class="field-input"
                                required>
                            <span class="field-error">
                                <i class="bi bi-exclamation-circle"></i> Hora fuera del rango (9:00‚Äì20:00)
                            </span>
                        </div>

                        <div class="field-group" id="fg-final">
                            <label class="field-label" for="final">
                                <i class="bi bi-clock-history"></i> Hora de salida
                            </label>
                            <input type="time"
                                id="final"
                                name="final"
                                class="field-input"
                                required>
                            <span class="field-error">
                                <i class="bi bi-exclamation-circle"></i> Debe ser posterior a la llegada
                            </span>
                        </div>
                    </div>

                    <!-- Personas -->
                    <div class="field-group" id="fg-personas">
                        <label class="field-label" for="personas">
                            <i class="bi bi-people-fill"></i> N√∫mero de personas
                        </label>
                        <input type="number"
                            id="personas"
                            name="personas"
                            class="field-input"
                            placeholder="¬øCu√°ntas personas?"
                            min="1"
                            max="20"
                            required>
                        <span class="field-hint">
                            <i class="bi bi-info-circle"></i> M√°ximo 20 personas por reserva
                        </span>
                        <span class="field-error">
                            <i class="bi bi-exclamation-circle"></i> Entre 1 y 20 personas
                        </span>
                    </div>

                    <!-- Aviso de horario -->
                    <div class="info-banner">
                        <i class="bi bi-clock-fill info-banner-icon"></i>
                        <div>
                            <strong>Horario de atenci√≥n:</strong> 11:00 AM ‚Äì 10:30 PM<br>
                            <small>Duraci√≥n de reserva: 30 min ‚Äì 3 horas</small>
                        </div>
                    </div>

                    <!-- Botones -->
                    <div class="btn-group-res">
                        <button type="submit" name="accion" value="azar" class="btn-res btn-res-primary">
                            <i class="bi bi-shuffle"></i> Reservar al Azar
                        </button>
                        <button type="submit" name="accion" value="elegir" class="btn-res btn-res-outline">
                            <i class="bi bi-hand-index"></i> Elegir mi Mesa
                        </button>
                    </div>

                    <!-- Contenedor din√°mico de mesas -->
                    <div id="contenedorMesas" class="mesas-container" aria-live="polite"></div>

                </form>

                <!-- Badges de confianza -->
                <div class="trust-badges">
                    <span class="trust-badge"><i class="bi bi-shield-check"></i> Reserva Segura</span>
                    <span class="trust-badge"><i class="bi bi-lightning-charge"></i> Confirmaci√≥n Inmediata</span>
                    <span class="trust-badge"><i class="bi bi-star-fill"></i> Sin Costo</span>
                </div>

            </div>
        </section>

        <!-- COLUMNA VISUAL -->
        <aside class="res-visual-col">
            <div class="visual-sticky">

                <!-- Imagen del restaurante -->
                <div class="res-img-wrap">
                    <img src="../img/mesas.png" alt="Mesas del restaurante Sabor Casero" class="res-img">
                    <div class="res-img-caption">
                        <i class="bi bi-geo-alt-fill"></i> Ambiente Acogedor ¬∑ Sabor Casero
                    </div>
                </div>

                <!-- Tarjeta de confirmaci√≥n (oculta hasta reservar) -->
                <div id="respuestaBackend" class="confirm-card hidden" role="status" aria-live="polite">
                    <div class="confirm-card-header">
                        <i class="bi bi-check-circle-fill"></i>
                        <h3>¬°Reserva Confirmada!</h3>
                    </div>
                    <div class="confirm-card-body">
                        <div id="detalleReserva" class="detalle-lista"></div>
                        <div class="confirm-note">
                            <p><i class="bi bi-envelope"></i> Recibir√°s confirmaci√≥n por SMS</p>
                            <p><i class="bi bi-telephone"></i> Consultas al <strong>449 135</strong></p>
                        </div>
                    </div>
                </div>

                <!-- ¬øPor qu√© reservar? -->
                <div class="why-card">
                    <h4 class="why-title">
                        <i class="bi bi-question-circle"></i> ¬øPor qu√© reservar?
                    </h4>
                    <ul class="why-list">
                        <li><i class="bi bi-check2"></i> Garantiza tu mesa en horarios pico</li>
                        <li><i class="bi bi-check2"></i> Evita tiempos de espera</li>
                        <li><i class="bi bi-check2"></i> Atenci√≥n personalizada</li>
                        <li><i class="bi bi-check2"></i> Modificaci√≥n flexible hasta 2h antes</li>
                    </ul>
                </div>

            </div>
        </aside>

    </main>

    <!-- ===== FOOTER MINI ===== -->
    <footer class="res-footer">
        <p>¬© 2026 <strong>Sabor Casero</strong> ‚Äì Sicuani, Cusco | Todos los derechos reservados</p>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <script src="reservas.js"></script>

</body>
</html>